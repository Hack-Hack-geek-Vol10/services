FROM golang:1.21.4

WORKDIR /app/project-service

COPY . .

RUN go build -o project-service ./cmd/app/main.go

ENV SERVER_ADDR=8082
ENV PSQL_HOST=
ENV PSQL_PORT=
ENV PSQL_USER=
ENV PSQL_PASSWORD=
ENV PSQL_DBNAME=
ENV PSQL_SSLMODE=
ENV PSQL_CONNECT_TIMEOUT=
ENV PSQL_CONNECT_WAIT_TIME=
ENV PSQL_CONNECT_ATTEMPTS=
ENV PSQL_CONNECT_BLOCKS=
ENV PSQL_CLOSE_TIMEOUT=

ENV NEW_RELIC_LICENSE_KEY=
ENV NEW_RELIC_APP_NAME=
ENV NEW_RELIC_CODE_LEVEL_METRICS_ENABLED=
ENV NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=
ENV NEW_RELIC_PROCESS_HOST_DISPLAY_NAME=
ENV NEW_RELIC_LABELS=


EXPOSE ${SERVER_ADDR}

CMD ["./project-service"]